================================================================================
  ZAI LEAD GENERATOR — SESSION BULLETIN
  Date: February 12, 2026
  Version: v2.0.7
================================================================================

SCRAPER ENGINE FIXES (v2.0 LOCKED)
--------------------------------------------------------------------------------

[BUG FIX] Host vs Reviewer Bug
  - Fixed the scraper picking reviewer profiles instead of the host.
  - Now uses PdpHomeMarketplace marker in the URL — only the host has it.

[BUG FIX] Login Redirect Bug
  - /users/show/ was redirecting to Airbnb's login page.
  - Switched to /users/profile/ which works without authentication.

[BUG FIX] Host Section Not Found
  - Old pdp-host-profile-section selector didn't work.
  - Added multi-selector fallback (HOST_OVERVIEW_DEFAULT, HOST_PROFILE_DEFAULT)
    plus text-based fallback searching for "anfitrião"/"superhost" in Portuguese.

[BUG FIX] "Consultar Perfil" as Host Name
  - The h2/h3 element was grabbing a button label instead of actual name.
  - Rewrote extraction to use regex on section text (Anfitriã(o): {name}),
    with a blacklist filter for garbage values.

[FEATURE] Portuguese Language Support
  - Added PT-BR variants for Superhost (superanfitrião, superanfitriã),
    host name patterns (Anfitriã(o), Hospede-se com), and listing counts
    (anúncios, acomodações).

[REMOVED] AI Dependency
  - Completely removed all AI/Gemini dependencies.
  - Status flow simplified: pending → ready. Zero quota issues.


APP UI CHANGES (v2.0.1 through v2.0.7)
--------------------------------------------------------------------------------

[v2.0.1] Compact Portfolio Display
  - Replaced 41 rows of "Listing" with a single clean card:
    "41 imóveis gerenciados".

[v2.0.2] Clean Portfolio Display
  - Removed confusing "X imóveis detectados no perfil" subtitle.
  - Just shows the total number now.

[v2.0.3] CRM-Style Display
  - Host name is now the primary lead identifier (was listing title).
  - Listing title appears as subtitle in the detail sheet.

[v2.0.4] Missing Leads Fix + Search by Host Name
  - Fixed: contatado == false excluded null rows (changed to != true).
  - Search bar now matches host name, listing title, and neighborhood.

[v2.0.5] Host Name Extraction Fix + Total Leads Count
  - Fixed "Consultar Perfil" appearing as host name for all leads.
  - Total Leads now shows real DB count (allLeads), not filtered count.

[v2.0.6] Default Sort = Luxury Score
  - App opens sorted by highest Luxury Score instead of newest.

[v2.0.7] Real Contact Actions
  - Removed fake WhatsApp/Email buttons. Replaced with:
    * "Mensagem no Airbnb" → Opens listing page to DM the host
    * "Pesquisar Contato" → Google searches "{host name} {bairro} contato telefone"
    * WhatsApp/Email only appear when real data exists in DB

[v2.0.8] Host Categorization (Company vs Person)
  - Added smart detection for professional hosts vs individuals.
  - Logic: Name keywords (Stay, Luxury, Aluguel) + Portfolio Size (>2) + Word Count.
  - Tags are stored in the 'badges' column for easy visibility in the CRM.
  - All 94 existing leads have been bulk-categorized.
  - No 5G connection required for this approach.


DATABASE CLEANUPS
--------------------------------------------------------------------------------

  - 54 fake emails cleared (host_xxx@luxuryrj.com garbage removed)
  - 87 leads re-scraped with v2.0 engine for accurate host names and portfolios
  - 47 leads with "Consultar Perfil" as host name reset and re-scraped


DOCUMENTATION & VERSIONING
--------------------------------------------------------------------------------

  - Git tag v2.0 — Locked version with working host profile scraping
  - Architecture workflow — .agent/workflows/scraper-architecture.md
    documents all locked decisions (DO NOT CHANGE)
  - 7 APK releases — v2.0 through v2.0.7, all pushed to GitHub


TECH STACK
--------------------------------------------------------------------------------

  - Scraper:   Python + Selenium + BeautifulSoup
  - Backend:   Supabase (PostgreSQL + Realtime)
  - App:       Flutter (Android APK)
  - AI:        REMOVED (zero dependency)
  - Env vars:  SUPABASE_URL, SUPABASE_KEY


NEXT STEPS (CRM EVOLUTION)
--------------------------------------------------------------------------------

  1. Expand Geography
     - New Rio neighborhoods
     - São Paulo, Florianópolis, etc.

  2. Automated Follow-ups
     - Notification system for 'Responded' leads.
     - Scheduled reminders.
[v2.0.9] Mass Messaging Implementation
  - Added "Selection Mode" to the CRM Dashboard.
  - Multi-select multiple hosts to initiate a sequence of sales pitches.
  - New "Mass Message Sheet" with template editing.
  - Automated "Disparo" launches Airbnb listing pages in sequence for outreach.
  - Integrated Floating Action Button (FAB) for bulk actions.

[v2.2.0] Host-Centric Portfolio
  - Lead Deduplication: Dashboard now groups listings by host to avoid clutter.
  - Host Explorer: In the details sheet, users can see ALL other properties from the same host.
  - Quick Access: Tapping any property in the portfolio list opens its Airbnb page.

[v2.3.1] CRM Sales Funnel & Auto-Tracking
  - Sales Pipeline: Formalized stages (Novo, Contatado, Respondeu, Interessado, Venda).
  - Smart Tracking: Initiating a WhatsApp/Email/Airbnb msg automatically moves "Novo" leads to "Contatado".
  - Stage Management: Added status chips in the detail view for manual stage transitions.

[v2.3.3] Listing Manager & Lead Archive
  - Archive Toggle: New icon in App Bar to switch between "Active Leads" and "Contacted Archive".
  - Recovery System: Added a "Restaurar Lead" feature to rescue items from the archive.
  - Cleanup: Separates the daily work list from the long-term sales funnel.

[v2.3.4] Bulk Recovery & Data Integrity
  - Mass Restore: Added "Restaurar Selecionados" action back to active list.
  - Confirmation Prompt: Refined Auto-Contact to use a confirm/deny SnackBar to prevent false positives.

[v2.5.0] Multi-Factor Lead Scoring (The "Whale" Algorithm)
  - Scoring Overhaul: Replaced single-factor price ranking with a weighted composite model.
  - Weighted Factors:
    * Luxury Index (45%): High price relative to market.
    * Scale Factor (25%): Portfolio size (larger hosts = more scale potential).
    * Service Need (20%): Number of identified maintenance gaps.
    * Professionalism (10%): Categorized host type (Company vs Person).
  - High Intent Detection: Leads with high maintenance needs and large portfolios now soar to the top of the list.

[v2.5.1] Cloud Infrastructure & UI Polish
  - GCP VM Deployment: Watcher service successfully moved to Google Cloud Compute Engine.
  - Always-On Engine: Set up systemd service for 24/7 lead enrichment.
  - Layout Fix: Resolved right-overflow issue in lead cards by implementing flexible neighborhood/price labels.
  - Security Upgrade: Switched to service_role keys on server for unrestricted database access.

[v2.6.0] Geographical Expansion (WIP)
  - Multi-State Coverage: Expanded search clusters to cover the entire states of Rio de Janeiro (RJ), São Paulo (SP), Minas Gerais (MG), and Espírito Santo (ES).
  - High-End Targeting: Implemented specific search logic for top luxury clusters (Jardins, Vila Nova Conceição, Escarpas do Lago, Búzios, etc.).
  - Regional Labeling: Leads now include state markers (e.g., "Ipanema (RJ)", "Itaim Bibi (SP)") for easier filtering.

================================================================================
  Current Version: v2.6.0 (WIP)
  Git Range: HEAD
  Last Updated: Feb 15, 2026 04:00 PM BRT
================================================================================


